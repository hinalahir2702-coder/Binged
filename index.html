<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>CineNova</title>

<style>
body {
  font-family: Arial;
  background: #0f0f0f;
  color: white;
  padding: 20px;
}

h2, h3 { margin-top: 25px; }

input, select, textarea, button {
  width: 100%;
  padding: 10px;
  margin: 6px 0;
  border-radius: 8px;
  border: none;
}

button {
  background: #333;
  color: white;
  cursor: pointer;
}

button:hover { background: #444; }

.card {
  background: #1c1c1c;
  padding: 12px;
  margin-top: 12px;
  border-radius: 12px;
  position: relative;
}

.menu {
  display: none;
  margin-top: 5px;
}

.menu button {
  background: #2a2a2a;
}

.top-row {
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.dot {
  font-size: 22px;
  cursor: pointer;
}

.checkbox {
  margin-right: 8px;
}
</style>
</head>
<body>

<h2>ðŸŽ¬ CineNova</h2>

<input id="title" placeholder="Title">

<select id="type">
  <option>Movie</option>
  <option>Series</option>
  <option>Book</option>
</select>

<select id="genre">
  <option>Action</option>
  <option>Drama</option>
  <option>Comedy</option>
  <option>Romance</option>
  <option>Thriller</option>
  <option>Sci-Fi</option>
  <option>Horror</option>
  <option>Mystry</option>
  <option>Superhero</option>
  <option>Spy</option>
  <option>FamilyDrama</option>
  <option>Fantasy</option>
  <option>Animation</option>
  <option>Cartoon</option>
  <option>Documentry</option>
  <option>Biography</option>
  <option>Travel</option>
  <option>Musical</option>
  <option>Crime</option>
  <option>RealityShow</option>
  <option>GameShow</option>
  <option>TalkShow</option>
</select>

<input id="rating" type="number" min="1" max="10" placeholder="Rating (1-10)">
<input id="date" type="date">
<textarea id="notes" placeholder="Notes"></textarea>

<button onclick="addWatched()">Add to Watched</button>
<button onclick="addWishlist()">Add to Wishlist</button>
<button onclick="toggleSelectMode()">Select Mode</button>
<button onclick="deleteSelected()">Delete Selected</button>

<select onchange="sortWatched(this.value)">
  <option value="">Sort Watched</option>
  <option value="date">By Date (Newest)</option>
  <option value="rating">By Rating (Highest)</option>
  <option value="alpha">Alphabetical</option>
  <option value="genre">By Genre</option>
  <option value="type">By Type</option>
</select>

<h3>Watched</h3>
<div id="watchedList"></div>

<h3>Wishlist</h3>
<div id="wishlist"></div>

<script>
let watched = JSON.parse(localStorage.getItem("watched")) || [];
let wishlist = JSON.parse(localStorage.getItem("wishlist")) || [];
let selectMode = false;
let selectedWatched = new Set();
let selectedWishlist = new Set();

function save() {
  localStorage.setItem("watched", JSON.stringify(watched));
  localStorage.setItem("wishlist", JSON.stringify(wishlist));
}

function getFormData() {
  return {
    title: title.value,
    type: type.value,
    genre: genre.value,
    rating: rating.value,
    date: date.value,
    notes: notes.value
  };
}

function addWatched() {
  watched.push(getFormData());
  save();
  render();
}

function addWishlist() {
  wishlist.push(getFormData());
  save();
  render();
}

function toggleSelectMode() {
  selectMode = !selectMode;
  selectedWatched.clear();
  selectedWishlist.clear();
  render();
}

function toggleMenu(id) {
  let menu = document.getElementById(id);
  menu.style.display =
    menu.style.display === "block" ? "none" : "block";
}

function render() {

  const watchedDiv = document.getElementById("watchedList");
  const wishlistDiv = document.getElementById("wishlist");

  watchedDiv.innerHTML = "";
  wishlistDiv.innerHTML = "";

  watched.forEach((e, i) => {
    watchedDiv.innerHTML += `
      <div class="card">
        <div class="top-row">
          <div>
            ${selectMode ? `<input class="checkbox" type="checkbox" onchange="toggleSelect('watched', ${i})">` : ""}
            <strong>${e.title}</strong>
          </div>
          ${!selectMode ? `<span class="dot" onclick="toggleMenu('w${i}')">â‹¯</span>` : ""}
        </div>

        <div id="w${i}" class="menu">
          <button onclick="deleteWatched(${i})">Delete</button>
        </div>

        Type: ${e.type}<br>
        Rating: ${e.rating}/10<br>
        Date: ${e.date}<br>
        Genre: ${e.genre}<br>
        Notes: ${e.notes}
      </div>
    `;
  });

  wishlist.forEach((e, i) => {
    wishlistDiv.innerHTML += `
      <div class="card">
        <div class="top-row">
          <div>
            ${selectMode ? `<input class="checkbox" type="checkbox" onchange="toggleSelect('wishlist', ${i})">` : ""}
            <strong>${e.title}</strong>
          </div>
          ${!selectMode ? `<span class="dot" onclick="toggleMenu('x${i}')">â‹¯</span>` : ""}
        </div>

        <div id="x${i}" class="menu">
          <button onclick="deleteWishlist(${i})">Delete</button>
        </div>

        Type: ${e.type}<br>
        Genre: ${e.genre}<br>
        Notes: ${e.notes}
      </div>
    `;
  });
}

function toggleSelect(type, index) {
  if (type === "watched") {
    selectedWatched.has(index)
      ? selectedWatched.delete(index)
      : selectedWatched.add(index);
  } else {
    selectedWishlist.has(index)
      ? selectedWishlist.delete(index)
      : selectedWishlist.add(index);
  }
}

function deleteWatched(index) {
  if (confirm("Delete this item?")) {
    watched.splice(index, 1);
    save();
    render();
  }
}

function deleteWishlist(index) {
  if (confirm("Delete this item?")) {
    wishlist.splice(index, 1);
    save();
    render();
  }
}

function deleteSelected() {
  if (!confirm("Delete selected items?")) return;

  watched = watched.filter((_, i) => !selectedWatched.has(i));
  wishlist = wishlist.filter((_, i) => !selectedWishlist.has(i));

  save();
  toggleSelectMode();
}

function sortWatched(type) {
  if (type === "date")
    watched.sort((a,b)=>new Date(b.date)-new Date(a.date));

  if (type === "rating")
    watched.sort((a,b)=>b.rating-a.rating);

  if (type === "alpha")
    watched.sort((a,b)=>a.title.localeCompare(b.title));

  if (type === "genre")
    watched.sort((a,b)=>a.genre.localeCompare(b.genre));

  if (type === "type")
    watched.sort((a,b)=>a.type.localeCompare(b.type));

  render();
}

render();
</script>

</body>
</html>
